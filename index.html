<script>
  const API = 'https://tavern-backend-j82t.onrender.com';   // your live back-end

  async function login() {
    const email = document.getElementById('email').value;
    const pw    = document.getElementById('password').value;
    const msgEl = document.getElementById('msg');
    msgEl.textContent = '';

    try {
      const res = await fetch(`${API}/api/auth/login`, {
        method : 'POST',
        headers: {'Content-Type':'application/json'},
        body   : JSON.stringify({email, password: pw})
      });
      const data = await res.json();
      if (data.error) { msgEl.textContent = data.error; return; }

      // successful login
      document.body.innerHTML = `
        <div class="card">
          <h2>Welcome ${data.name}</h2>
          <p>You are logged in as <strong>${data.role}</strong>.</p>
          <p>Back-end is working!</p>
          <button onclick="location.reload()">Logout</button>
        </div>`;
    } catch (e) {
      msgEl.textContent = 'Back-end unreachable';
    }
  }
</script>
